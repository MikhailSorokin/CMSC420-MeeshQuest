package cmsc420.meeshquest.datastructures;

import org.w3c.dom.Element;

import cmsc420.meeshquest.citymapobjects.City;
import cmsc420.meeshquest.utilities.XmlParser;

public class MXQuadtree {

	private GreyNode root;     

	public MXQuadtree() {
		root = null;
	}
	
    /* Function to check if quadTree is empty */
    public boolean isEmpty()
    {
        return root == null;
    }
    
    /* Make the tree logically empty */
    public void makeEmpty()
    {
        root = null;
    }
	
    public void insert(City cityData) {
    	if (root == null) {
    		root = new GreyNode(XmlParser.spatialWidth/2, XmlParser.spatialHeight/2);
    	}
    	root = (GreyNode) root.add(cityData);
    }
    
    /* Function for inorder traversal */
    public void inorder(Element parentElement)
    {
        inorder(root, parentElement);
    }
    private void inorder(Node node, Element parentElement)
    {
        if (node.getClass().isInstance(GreyNode.class))
        {
        	Element grayNode = XmlParser.results.createElement("gray");
        	grayNode.setAttribute("x", Integer.toString((int)node.data.getX()));
        	grayNode.setAttribute("y", Integer.toString((int)node.data.getY()));
        	parentElement.appendChild(grayNode);
        	
            /*inorder(node.quadrantOne, grayNode);
            inorder(node.quadrantTwo, grayNode);
            inorder(node.quadrantThree, grayNode);
            inorder(node.quadrantFour, grayNode);*/
        } else if (node.getClass().isInstance(BlackNode.class)) { 
        	Element blackNode = XmlParser.results.createElement("black");
        	blackNode.setAttribute("name", node.data.getName());
        	blackNode.setAttribute("x", Integer.toString((int)node.data.getX()));
        	blackNode.setAttribute("y", Integer.toString((int)node.data.getY()));
        	parentElement.appendChild(blackNode);
        } else if (node.getClass().isInstance(WhiteNode.getInstance)) {
        	//If Null, create empty children Node
        	Element emptyChildElement = XmlParser.results.createElement("white"); 
        	parentElement.appendChild(emptyChildElement);
        }
    }
    
}
